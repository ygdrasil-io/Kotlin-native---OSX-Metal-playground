WIP from https://developer.apple.com/metal/sample-code/