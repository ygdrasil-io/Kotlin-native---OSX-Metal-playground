WIP from Learn Metal with C++ sample at https://developer.apple.com/metal/sample-code/